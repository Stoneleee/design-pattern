<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>02_1策略模式</title>
</head>

<body>
    <div id="div" style="position: absolute;background:blue;">I'am div</div>
    <script>
        // 策略模式 
        // 绩效计算的各个策略类  传统面向对象实现方式
        const performanceS = function () { };
        performanceS.prototype.calculate = function (salary) {
            return salary * 4;
        }
        const performanceA = function () { };
        performanceA.prototype.calculate = function (salary) {
            return salary * 3;
        }
        const performanceB = function () { };
        performanceB.prototype.calculate = function (salary) {
            return salary * 2;
        }
        // 奖金类
        const Bonus = function () {
            this.salary = null;
            this.strategy = null;
        }

        Bonus.prototype.setSalary = function (salary) {
            this.salary = salary;
        }

        Bonus.prototype.setStrategy = function (strategy) {
            this.strategy = strategy;
        }

        Bonus.prototype.getBonus = function () {
            return this.strategy.calculate(this.salary);
        }

        const bonus = new Bonus();
        bonus.setSalary(6000);
        bonus.setStrategy(new performanceS());
        console.log(bonus.getBonus());


        // JavaScript版本的策略模式
        const strategies = {
            "S": function (salary) {
                return salary * 4
            },
            "B": function (salary) {
                return salary * 3
            },
            "A": function (salary) {
                return salary * 2
            }
        }

        const calculateBonus = function (level, salary) {
            return strategies[level](salary);
        }

        console.log(calculateBonus('S', 6000));
    </script>
</body>

</html>